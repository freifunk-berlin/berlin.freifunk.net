{{/* Overwriting the theme partial to set custom meta tags, reduce css and remove unused components. */}}
<head>
    <meta charset="utf-8" />
    <title>{{ block "title" . }}{{ with .Params.Title }}{{ . }} | {{ end }}{{ .Site.Title }}{{ end }}</title>
    {{- if not hugo.IsProduction }}
    <meta name="robots" content="noindex">
    {{- end }}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end }}">
    <!-- favicon -->
    {{ block "head/favicon" . }}{{ partialCached "head/favicon.html" . }}{{ end }}
    <!-- Custom CSS -->
    {{- $options := dict "enableSourceMap" true }}
    {{- if hugo.IsProduction}}
        {{- $options := dict "enableSourceMap" false "outputStyle" "compressed" }}
    {{- end }}
    {{- $style := resources.Get "/scss/style.scss" }}
    {{- $style = $style | resources.ExecuteAsTemplate "/scss/style.scss" . | resources.ToCSS $options | resources.PostCSS }}
    {{- if hugo.IsProduction }}
        {{- $style = $style | minify | fingerprint "sha384" | resources.PostProcess }}
    {{- end -}}
    <style>{{ $style.Content | safeCSS }}</style>
    <!-- Bootstrap JS -->
    {{ $js := resources.Get "js/bootstrap.js" }}
    {{ $params := dict }}
    {{ $sourceMap := cond hugo.IsProduction "" "inline" }}
    {{ $opts := dict "sourceMap" $sourceMap "minify" hugo.IsProduction "target" "es2018" "params" $params }}
    {{ $js = $js | js.Build $opts }}
    {{ if hugo.IsProduction }}
        {{ $js = $js | fingerprint "sha384" }}
    {{ end }}
    <!-- Canonical links -->
    <link rel="canonical" href="{{ .Permalink }}">
    <!-- Home background -->
    {{ if .IsHome }}
    {{ with resources.Get "images/header.webp" }}
    <link rel="preload" fetchpriority="high" as="image" href="{{ .RelPermalink }}" type="image/webp">
    <style>
        .hero {
                background-image: linear-gradient(to bottom, transparent 0%, #fff),  url("{{ .RelPermalink }}");
        }
    </style>
    {{ end }}
    {{ end }}
        <script src="{{ $js.RelPermalink }}" {{ if hugo.IsProduction }}integrity="{{ $js.Data.Integrity }}"{{ end -}} defer></script>
</head>
